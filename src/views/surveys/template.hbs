{{!-- src/views/surveys/template.hbs --}}
<div class="surveys-view-container">
    <header class="surveys-header">
        <button class="back-button" id="backBtn" aria-label="Regresar">
            {{{backIcon}}}
        </button>
        <div class="header-content">
            <h1 class="view-title">Encuestas</h1>
            <p class="view-subtitle">Responde las encuestas disponibles</p>
        </div>
        <button class="refresh-button" id="refreshBtn" aria-label="Refrescar">
            {{{refreshIcon}}}
        </button>
    </header>

    <main class="surveys-main">
        {{#if loading}}
        <div class="surveys-loading" id="surveysLoading">
            <div class="loading-content">
                <div class="loading-skeleton">
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                </div>
                <p class="loading-text">Cargando encuestas...</p>
            </div>
        </div>
        {{/if}}

        <div class="surveys-error" id="surveysError" style="display: none;"></div>

        <div class="surveys-container" id="surveysContainer">
            {{#unless loading}}
            {{#if surveys}}
            <div class="surveys-grid">
                {{#each surveys}}
                <div class="survey-card {{statusClass}}" data-survey-id="{{iSurveyId}}">
                    <div class="survey-header">
                        <div class="survey-status">
                            <span class="status-icon">{{#if isExpired}}‚è∞{{else}}üìã{{/if}}</span>
                            <span class="status-text">{{expirationStatus}}</span>
                        </div>
                        {{{../rightArrowIcon}}}
                    </div>

                    <div class="survey-content">
                        <h3 class="survey-title">{{vcSurvey}}</h3>
                        {{!-- No program/author/createdDate --}}
                    </div>

                    <div class="survey-meta">
                        <div class="meta-item">
                            {{{../questionsIcon}}}
                            <span>{{questionsLabel}}</span>
                        </div>
                        <div class="meta-item">
                            {{{../clockIcon}}}
                            <span>{{timeLabel}}</span>
                        </div>
                    </div>

                    <div class="survey-dates">
                        {{#if expirationDate}}
                        <small>Expira: {{expirationDate}}</small>
                        {{/if}}
                    </div>
                </div>
                {{/each}}
            </div>
            {{else}}
            <div class="surveys-empty">
                <p>No hay encuestas disponibles por ahora.</p>
            </div>
            {{/if}}
            {{/unless}}
        </div>
    </main>
</div>