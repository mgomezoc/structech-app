{{!-- src/views/enrollment-manual/template.hbs --}}

<div class="header">
    <div class="header-nav">
        <button id="backBtn" class="btn-back" title="Volver al dashboard">‚Üê Volver</button>
        <h1>
            <img src="{{logoUrl}}" alt="StructTech" class="logo" />
            Enrolamiento Manual
        </h1>
    </div>
</div>

<div>
    <form id="enrollForm" class="form-section">
        {{!-- Estructura y Subestructura --}}
        <div class="form-group">
            <label for="estructura">Selecciona Estructura*</label>
            <select id="estructura" name="estructura" class="form-control" required>
                <option value="">Sin selecci√≥n</option>
            </select>
        </div>
        <div class="form-group">
            <label for="subestructura">Selecciona SubEstructura*</label>
            <select id="subestructura" name="subestructura" class="form-control" required>
                <option value="">Sin selecci√≥n</option>
            </select>
        </div>

        {{!-- Datos personales --}}
        <div class="form-row">
            <div class="form-group flex-1">
                <label for="nombre">Nombre*</label>
                <input type="text" id="nombre" name="nombre" class="form-control" required />
            </div>
            <div class="form-group flex-1">
                <label for="apellidoPaterno">Apellido Paterno*</label>
                <input type="text" id="apellidoPaterno" name="apellidoPaterno" class="form-control" required />
            </div>
            <div class="form-group flex-1">
                <label for="apellidoMaterno">Apellido Materno</label>
                <input type="text" id="apellidoMaterno" name="apellidoMaterno" class="form-control" />
            </div>
        </div>

        {{!-- Fecha y Estado de Nacimiento juntos --}}
        <div class="form-row">
            <div class="form-group flex-1">
                <label for="fechaNacimiento">Fecha de Nacimiento*</label>
                <input type="date" id="fechaNacimiento" name="fechaNacimiento" class="form-control" required />
                <small class="help-text">Selecciona tu fecha de nacimiento</small>
            </div>
            <div class="form-group flex-1">
                <label for="estadoNacimiento">Lugar de Nacimiento*</label>
                <select id="estadoNacimiento" name="estadoNacimiento" class="form-control" required>
                    <option value="">‚Äî Selecciona tu estado ‚Äî</option>
                    {{#each estados}}
                    <option value="{{this.clave}}">{{this.nombre}}</option>
                    {{/each}}
                </select>
                <small class="help-text">Estado donde naciste</small>
            </div>
        </div>

        <div class="form-group flex-1">
            <label>G√©nero*</label>
            <div class="gender-group">
                <div class="gender-option">
                    <input type="radio" id="hombre" name="genero" value="M" required />
                    <label for="hombre">üë® Hombre</label>
                </div>
                <div class="gender-option">
                    <input type="radio" id="mujer" name="genero" value="F" />
                    <label for="mujer">üë© Mujer</label>
                </div>
            </div>
            <small class="help-text">Selecciona tu g√©nero</small>
        </div>
        </div>

        {{!-- CURP autom√°tico --}}
        <div class="form-group curp-group">
            <label for="curp">CURP*</label>
            <div class="curp-wrapper">
                <input type="text" id="curp" name="curp" class="form-control" readonly
                    placeholder="Se generar√° autom√°ticamente" maxlength="18" required />
                <button type="button" id="recalcularCurp" class="btn-secondary btn-small" title="Recalcular CURP">
                    üîÑ
                </button>
            </div>
            <small class="help-text">Tu CURP se compone de tus datos anteriores</small>
        </div>

        {{!-- C√≥digo Postal y Colonia --}}
        <div class="form-row">
            <div class="form-group flex-1">
                <label for="codigoPostal">C√≥digo Postal*</label>
                <input type="number" id="codigoPostal" name="codigoPostal" class="form-control" required />
            </div>
            <div class="form-group flex-1">
                <label for="colonia">Colonia*</label>
                <select id="colonia" name="colonia" class="form-control" required>
                    <option value="">‚Äî Selecciona tu colonia ‚Äî</option>
                </select>
            </div>
        </div>

        {{!-- Direcci√≥n --}}
        <div class="form-group">
            <label for="calleNumero">Direcci√≥n (calle y n√∫mero)*</label>
            <input type="text" id="calleNumero" name="calleNumero" class="form-control" placeholder="Ej: Morelos 426"
                required />
        </div>

        {{!-- Observaci√≥n --}}
        <div class="form-group">
            <label for="observacion">Observaci√≥n</label>
            <textarea id="observacion" name="observacion" class="form-control" rows="3"></textarea>
        </div>

        {{!-- Tel√©fono y Email --}}
        <div class="form-row">
            <div class="form-group flex-1">
                <label for="telefono">Tel√©fono*</label>
                <input type="tel" id="telefono" name="telefono" class="form-control" required />
            </div>
            <div class="form-group flex-1">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" class="form-control" />
            </div>
        </div>

        {{!-- Imagen del Documento --}}
        <div class="form-group">
            <label for="otherFile">Imagen del Documento*</label>
            <input type="file" id="otherFile" accept="image/*" class="form-control" required />
            <input type="hidden" id="otherData" name="otherData" />
            <div id="filePreview" class="file-preview"></div>
        </div>

        {{!-- Firma --}}
        <div class="signature-section">
            <label>Firma de autorizaci√≥n*</label>
            <div class="signature-box" id="signatureBox">
                <canvas id="signatureCanvas"></canvas>
                <div id="signaturePlaceholder">‚úèÔ∏è</div>
            </div>
            <div class="signature-controls">
                <button type="button" id="clearSignature">Limpiar Firma</button>
                <button type="button" id="undoSignature">Deshacer</button>
            </div>
            <input type="hidden" id="signatureImageData" name="signatureData" />
        </div>

        {{!-- Audio --}}
        <div class="audio-section">
            <div class="audio-controls">
                <button type="button" id="audioBtn" class="audio-button">
                    üé§
                </button>
                <div class="audio-info">
                    <div id="audioTimer">00:00:00</div>
                    <span id="audioHint">Mant√©n presionado para grabar</span>
                </div>
                <button type="button" id="audioDelete" class="audio-delete" title="Eliminar grabaci√≥n">
                    üóëÔ∏è
                </button>
            </div>
            <div id="audioWave" class="audio-wave">
                <span></span><span></span><span></span><span></span><span></span>
            </div>
            <input type="hidden" id="audioData" name="audioData" />
            <input type="hidden" id="audioMimeType" name="audioMimeType" />
        </div>

        <button type="submit" class="save-button" id="submitBtn">
            Enviar
        </button>
    </form>
</div>