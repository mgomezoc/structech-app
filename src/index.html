<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>StructTech App</title>
  </head>
  <body>
    <!-- Header -->
    <div class="header">
      <h1>
        <img src="img/logo-icono-structech.png" alt="StructTech" class="logo" />
        StructTech
      </h1>
    </div>

    <!-- Container principal -->
    <div class="container">
      <form id="formPersona" method="POST">
        <!-- Secci√≥n de foto -->
        <div class="profile-section">
          <div class="profile-photo" id="profilePhoto">
            <div
              id="profilePlaceholder"
              style="width: 430px; height: 430px"
            ></div>

            <img
              id="profileImage"
              src="img/profile.svg"
              alt=""
              style="
                display: none;
                width: 100%;
                height: 100%;
                object-fit: cover;
                border-radius: 50%;
              "
            />
          </div>
        </div>

        <!-- Formulario -->
        <div class="form-section">
          <div class="form-group">
            <label>Selecciona Estructura*</label>
            <select
              class="form-control"
              id="estructura"
              name="estructura"
              required
            >
              <option value="">Sin selecci√≥n</option>
              <option value="1">Estructura 1</option>
              <option value="2">Estructura 2</option>
            </select>
          </div>

          <div class="form-group">
            <label>Selecciona SubEstructura*</label>
            <select
              class="form-control"
              id="subestructura"
              name="subestructura"
              required
            >
              <option value="">Sin selecci√≥n</option>
              <option value="1">SubEstructura 1</option>
              <option value="2">SubEstructura 2</option>
            </select>
          </div>

          <div class="form-group">
            <label>Nombre*</label>
            <input
              type="text"
              class="form-control"
              id="nombre"
              name="nombre"
              placeholder="Nombre(s)"
              required
            />
          </div>

          <div class="form-group">
            <label>Apellido Paterno</label>
            <input
              type="text"
              class="form-control"
              id="apellidoPaterno"
              name="apellidoPaterno"
              placeholder="Apellido Paterno"
            />
          </div>

          <div class="form-group">
            <label>Apellido Materno</label>
            <input
              type="text"
              class="form-control"
              id="apellidoMaterno"
              name="apellidoMaterno"
              placeholder="Apellido Materno"
            />
          </div>

          <div class="form-group">
            <label>Fecha de Nacimiento</label>
            <input
              type="date"
              class="form-control"
              id="fechaNacimiento"
              name="fechaNacimiento"
            />
          </div>

          <div class="form-group">
            <label>G√©nero</label>
            <div class="gender-group">
              <div class="gender-option">
                <input type="radio" id="hombre" name="genero" value="M" />
                <label for="hombre">üë® Hombre</label>
              </div>
              <div class="gender-option">
                <input type="radio" id="mujer" name="genero" value="F" />
                <label for="mujer">üë© Mujer</label>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label>CURP</label>
            <input
              type="text"
              class="form-control"
              id="curp"
              name="curp"
              placeholder="CURP"
              maxlength="18"
            />
          </div>

          <div class="form-group">
            <label>Clave de Elector</label>
            <input
              type="text"
              class="form-control"
              id="claveElector"
              name="claveElector"
              placeholder="Clave de Elector"
            />
          </div>

          <div class="form-group">
            <label>Domicilio</label>
            <input
              type="text"
              class="form-control"
              id="domicilio"
              name="domicilio"
              placeholder="Domicilio completo"
            />
          </div>

          <div class="form-group">
            <label>Secci√≥n</label>
            <input
              type="text"
              class="form-control"
              id="seccion"
              name="seccion"
              placeholder="Secci√≥n electoral"
              maxlength="4"
            />
          </div>

          <div class="form-group">
            <label>Observaci√≥n</label>
            <textarea
              class="form-control"
              id="observacion"
              name="observacion"
              rows="3"
              placeholder="Agregar observaciones..."
            ></textarea>
          </div>

          <div class="form-group">
            <label>Tel√©fono</label>
            <input
              type="tel"
              class="form-control"
              id="telefono"
              name="telefono"
              placeholder="N√∫mero de tel√©fono"
            />
          </div>

          <!-- Secci√≥n de firma -->
          <div class="signature-section">
            <label>Firma de Autorizaci√≥n</label>
            <div class="signature-box" id="signatureBox">
              <!-- Canvas para dibujar la firma -->
              <canvas
                id="signatureCanvas"
                style="
                  display: block;
                  width: 100%;
                  height: 150px;
                  border: 1px solid #ddd;
                  border-radius: 8px;
                  background: white;
                "
              >
              </canvas>

              <!-- Imagen de firma escaneada (oculta por defecto) -->
              <img
                id="signatureImage"
                src=""
                alt=""
                style="
                  display: none;
                  max-width: 100%;
                  height: auto;
                  border-radius: 8px;
                "
              />

              <!-- Placeholder cuando no hay firma -->
              <div
                class="signature-placeholder"
                id="signaturePlaceholder"
                style="display: none"
              >
                ‚úèÔ∏è
              </div>
            </div>

            <!-- Controles de firma -->
            <div
              class="signature-controls"
              style="margin-top: 10px; display: flex; gap: 10px"
            >
              <button
                type="button"
                class="btn-clear-signature"
                id="clearSignature"
                style="flex: 1"
              >
                Limpiar Firma
              </button>
              <button
                type="button"
                class="btn-undo-signature"
                id="undoSignature"
                style="flex: 1"
              >
                Deshacer
              </button>
            </div>
          </div>

          <!-- Secci√≥n de audio -->
          <div class="audio-section">
            <div class="audio-controls">
              <button type="button" class="audio-button" id="audioBtn">
                üé§
              </button>
              <div class="audio-info">
                <div class="audio-timer" id="audioTimer">00:00:00</div>
                <span class="audio-hint" id="audioHint"
                  >Mant√©n presionado para grabar</span
                >
              </div>
              <button
                type="button"
                id="audioDelete"
                class="audio-delete"
                style="display: none"
              >
                üóëÔ∏è
              </button>
            </div>
            <div class="audio-wave" id="audioWave" style="display: none">
              <span></span><span></span><span></span><span></span><span></span>
            </div>
          </div>

          <!-- Campos ocultos para datos adicionales del escaneo -->
          <input type="hidden" id="documentNumber" name="documentNumber" />
          <input
            type="hidden"
            id="fullDocumentFrontImage"
            name="fullDocumentFrontImage"
          />
          <input
            type="hidden"
            id="fullDocumentBackImage"
            name="fullDocumentBackImage"
          />
          <input type="hidden" id="faceImageData" name="faceImageData" />
          <input
            type="hidden"
            id="signatureImageData"
            name="signatureImageData"
          />

          <!-- Bot√≥n guardar -->
          <button type="submit" class="save-button">Guardar</button>
        </div>
      </form>
    </div>

    <!-- Bot√≥n flotante para escanear INE -->
    <button id="btnScan" class="fab-scan">
      <div id="scanIcon" style="width: 64px; height: 64px"></div>
    </button>

    <!-- Resultado del escaneo (ahora oculto ya que se puebla el form) -->
    <div id="resultado" style="display: none"></div>

    <!-- Script -->
    <script type="module" src="js/app.js"></script>
  </body>
</html>
