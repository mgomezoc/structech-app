{{!-- src/views/surveys/template.hbs --}}

<div class="surveys-view-container">
    <!-- Header -->
    <header class="surveys-header">
        <button class="back-button" id="backBtn" aria-label="Regresar">
            {{{backIcon}}}
        </button>
        <div class="header-content">
            <h1 class="view-title">Encuestas</h1>
            <p class="view-subtitle">Responde las encuestas disponibles</p>
        </div>
        <button class="refresh-button" id="refreshBtn" aria-label="Refrescar">
            {{{refreshIcon}}}
        </button>
    </header>

    <!-- Main Content -->
    <main class="surveys-main">
        <!-- Loading State -->
        {{#if loading}}
        <div class="surveys-loading" id="surveysLoading">
            <div class="loading-content">
                <div class="loading-skeleton">
                    <!-- Skeleton Cards -->
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                    <div class="skeleton-card"></div>
                </div>
                <p class="loading-text">Cargando encuestas...</p>
            </div>
        </div>
        {{/if}}

        <!-- Error State -->
        <div class="surveys-error" id="surveysError" style="display: none;">
            <!-- Error content will be injected via JavaScript -->
        </div>

        <!-- Surveys Container -->
        <div class="surveys-container" id="surveysContainer">
            <!-- Surveys will be rendered here via JavaScript -->
            {{#unless loading}}
            {{#if surveys}}
            <div class="surveys-grid">
                {{#each surveys}}
                <div class="survey-card {{#if isExpired}}expired{{else}}active{{/if}}" data-survey-id="{{iSurveyId}}">
                    <div class="survey-header">
                        <div class="survey-status">
                            <span class="status-icon">{{#if isExpired}}‚è∞{{else}}üìã{{/if}}</span>
                            <span class="status-text">{{expirationStatus}}</span>
                        </div>
                        {{{../rightArrowIcon}}}
                    </div>

                    <div class="survey-content">
                        <h3 class="survey-title">{{vcSurvey}}</h3>
                        <p class="survey-program">{{vcProgram}}</p>
                        <p class="survey-creator">Por {{vcNames}}</p>
                    </div>

                    <div class="survey-meta">
                        <div class="meta-item">
                            {{{../questionsIcon}}}
                            <span>{{questionsLabel}}</span>
                        </div>
                        <div class="meta-item">
                            {{{../clockIcon}}}
                            <span>{{timeLabel}}</span>
                        </div>
                    </div>

                    <div class="survey-dates">
                        <small>Creada: {{createdDate}}</small>
                        {{#if expirationDate}}
                        <small>Expira: {{expirationDate}}</small>
                        {{/if}}
                    </div>
                </div>
                {{/each}}
            </div>
            {{/if}}
            {{/unless}}
        </div>
    </main>
</div>